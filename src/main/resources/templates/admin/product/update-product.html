<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="admin/admin-layout">

<head>
	<meta charset="ISO-8859-1">
	<title>Add Product</title>
    <style>
        .form-group{
            height: 40px;
            display: flex;
            flex-direction: row;
        }
        label{
            width: 200px;
        }
    </style>
</head>

<body>
	<div layout:fragment="content">
        <form id="updateProductForm">
            <input name="productId" th:value = "${product.productId}" type="hidden">
            <div class="form-group">
                <label>Product Name: </label>
                <input th:value = "${product.name}" type="text" name="name" class="form-control name" placeholder="Product Name">
            </div>
            <div class="form-group">
                <label>Description: </label>
                <input th:value = "${product.description}" type="text" name="description" class="form-control description" placeholder="Description">
            </div>
            <div class="form-group">
                <label>Import Price: </label>
                <input th:value = "${product.importPrice}" type="number" name="importPrice" class="form-control importPrice" placeholder="Import Price">
            </div>
            <div class="form-group">
                <label>Product Price: </label>
                <input th:value = "${product.price}" type="number" name="price" class="form-control price" placeholder="Product Price">
            </div>
            <div class="form-group">
                <label>Discount Percent: </label>
                <input th:value = "${product.discountPercent}" type="number" name="discountPercent" class="form-control discountPercent" placeholder="Discount Percent">
            </div>
            <div class="form-group">
                <label>Category Name: </label>
                <input th:value = "${product.category}" type="text" name="category" class="form-control category" placeholder="Category Name">
            </div>
            <div class="form-group">
                <label>Supplier Name: </label>
                <input th:value = "${product.suppilier}" type="text" name="suppilier" class="form-control suppilier" placeholder="Supplier Name">
            </div>
            <div class="form-group">
				<button class="btn btn-primary" type="submit">
					Update Product
				</button>
			</div>
        </form>

        <script>
            const updateFrom = document.querySelector("#updateProductForm")
			updateFrom.addEventListener('submit', (e) => {
				e.preventDefault();
				const updateFormValue = formToObject("#updateProductForm")
				const {productId} = updateFormValue;
				put("/admin/api/v1/products/"+productId, updateFormValue)
				.then(product => {
					 window.location.href = '/admin/products/search'
				})
			})
        </script>
    </div>
</body>
</html>